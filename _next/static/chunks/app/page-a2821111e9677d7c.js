(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4221:function(e,t,r){Promise.resolve().then(r.bind(r,4788))},4788:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var a=r(7437),l=r(2265);let s=e=>{let{setValue:t,className:r="",...l}=e;return(0,a.jsx)("input",{...l,onChange:e=>t(e.target.value),className:"".concat(r," py-2 px-3 border bg-transparent border-gray-500 placeholder-gray-500 focus:border-gray-400 transition-colors rounded-lg outline-none")})};class n{static getRandomHsl(){return"hsl(".concat(Math.floor(360*Math.random()),", ").concat(Math.floor(30*Math.random()+40),"%, ").concat(Math.floor(30*Math.random()+60),"%)")}}class i{static countOccurances(e,t){let r=e.reduce((e,r)=>t(r)?++e:e,0);return r}}class o{static getUniqueId(e,t){let r=this.getInitials(t),a=i.countOccurances(e,e=>e.startsWith(r));if(a){let e="+".repeat(a);r+=e}return r}static getInitials(e){let t=e.split(/\s+/),r=t.map(e=>{let t=e[0];return/[A-Za-z0-9]/.test(t)?t.toLowerCase():""});return r.join("")}}let c=(0,l.createContext)({categories:[],addCategory:()=>{},removeCategory:()=>{},initialize:()=>{}}),d=e=>{let{children:t}=e,[r,s]=(0,l.useState)([]),i=e=>{let t=r.find(t=>t.title.toLowerCase()===e.toLowerCase());if(t)return;let a=r.map(e=>e.id),l=o.getUniqueId(a,e),i=n.getRandomHsl();s(t=>[...t,{id:l,title:e,color:i}])};return(0,a.jsx)(c.Provider,{value:{categories:r,addCategory:i,removeCategory:e=>{let t=r.filter(t=>t.id.toLowerCase()!==e.toLowerCase());s(t)},initialize:()=>{i("Makes me money"),i("It's Fun / Cool"),i("Helps me grow"),i("Helps others")}},children:t})},u=()=>(0,l.useContext)(c),x=()=>{let{addCategory:e,initialize:t,categories:r}=u(),[n,i]=(0,l.useState)(""),o=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{r.length||o.current||(t(),o.current=!0)},[]),(0,a.jsx)("div",{children:(0,a.jsx)("form",{onSubmit:t=>{t.preventDefault(),e(n),i("")},children:(0,a.jsx)(s,{name:"category title",type:"text",value:n,setValue:i,placeholder:"Add a category",className:"w-full"})})})};var m=r(3385);let h=(0,l.createContext)({mappings:[],mapTask:()=>{},unmapTask:()=>{}}),f=e=>{let{children:t}=e,[r,s]=(0,l.useState)([]);return(0,a.jsx)(h.Provider,{value:{mappings:r,mapTask:(e,t)=>{let a=r.find(r=>r.task===e&&r.category===t);a||s(r=>[...r,{task:e,category:t}])},unmapTask:(e,t)=>{let a=r.filter(r=>r.task!=="t:".concat(e)||r.category!=="c:".concat(t));s(a)}},children:t})},g=()=>(0,l.useContext)(h),p=e=>{let{children:t}=e,{mapTask:r}=g();return(0,a.jsx)(m.LB,{onDragEnd:e=>{e.over&&r(String(e.active.id),String(e.over.id))},children:t})},j=e=>{let{children:t,id:r}=e,{isOver:l,setNodeRef:s}=(0,m.Zj)({id:r});return(0,a.jsx)("div",{ref:s,className:"w-full h-full transition-colors"+(l?" bg-gray-600":""),children:(0,a.jsx)("div",{children:t})})},v=(0,l.createContext)({tasks:[],addTask:()=>{},removeTask:()=>{}}),y=e=>{let{children:t}=e,[r,s]=(0,l.useState)([]);return(0,a.jsx)(v.Provider,{value:{tasks:r,addTask:e=>{let t=r.find(t=>t.title.toLowerCase()===e.toLowerCase());if(t)return;let a=r.map(e=>e.id),l=o.getUniqueId(a,e);s(t=>[...t,{id:l,title:e}])},removeTask:e=>{let t=r.filter(t=>t.title.toLowerCase()!==e.toLowerCase());s(t)}},children:t})},k=()=>(0,l.useContext)(v),C=e=>{let{task:t,clickHandler:r}=e;return(0,a.jsx)("li",{className:"my-1 py-1 px-4 rounded-md bg-gray-700 hover:bg-gray-600 select-none w-fit list-none cursor-pointer transition-colors",onClick:r,children:t.title})},w=e=>{let{category:t}=e,{removeCategory:r}=u(),{mappings:l,unmapTask:s}=g(),{tasks:n}=k(),i=l.filter(e=>e.category==="c:".concat(t.id)).map(e=>e.task),o=n.filter(e=>i.includes("t:".concat(e.id))),c=e=>{s(e.id,t.id)};return(0,a.jsx)("div",{className:"relative rounded-md flex overflow-hidden",style:{border:"2px solid ".concat(t.color)},children:(0,a.jsx)(j,{id:"c:"+t.id,children:(0,a.jsxs)("div",{className:"mt-10 mx-4",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 text-gray-800 pl-2 pr-3 rounded-br-md",style:{backgroundColor:t.color},children:[(0,a.jsx)("span",{className:"cursor-pointer mr-2 select-none",onClick:()=>r(t.id),children:"X"}),t.title]}),(0,a.jsx)("div",{children:o.map(e=>(0,a.jsx)(C,{task:e,clickHandler:()=>c(e)},e.id))})]})})})},N=()=>{let{categories:e}=u();return(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.map((e,t)=>(0,a.jsx)(w,{category:e},e.title+t))})},b=()=>{let{addTask:e}=k(),[t,r]=(0,l.useState)("");return(0,a.jsx)("div",{children:(0,a.jsx)("form",{onSubmit:a=>{a.preventDefault(),e(t),r("")},children:(0,a.jsx)(s,{name:"task title",type:"text",value:t,setValue:r,placeholder:"Add a task",className:"w-full"})})})},L=e=>{let{children:t,id:r}=e,{attributes:l,listeners:s,setNodeRef:n,transform:i}=(0,m.O1)({id:r}),o=i?{transform:"translate3d(".concat(i.x,"px, ").concat(i.y,"px, 0)")}:void 0;return(0,a.jsx)("div",{style:o,ref:n,...s,...l,className:"relative z-50 w-fit",children:(0,a.jsx)("div",{children:t})})},S=()=>{let{tasks:e}=k();return(0,a.jsx)("div",{children:(0,a.jsx)("ul",{className:"mt-2",children:e.map(e=>(0,a.jsx)(L,{id:"t:"+e.id,children:(0,a.jsx)(C,{task:e})},e.id))})})},T=e=>{let{children:t}=e;return(0,a.jsx)(y,{children:(0,a.jsx)(d,{children:(0,a.jsx)(f,{children:t})})})};function M(){return(0,a.jsx)(T,{children:(0,a.jsx)(p,{children:(0,a.jsxs)("main",{className:"max-w-7xl w-full mx-auto grid grid-cols-[1fr_3fr] py-4 gap-y-6 gap-x-8 flex-grow",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)(b,{}),(0,a.jsx)(S,{})]}),(0,a.jsx)(x,{})]}),(0,a.jsx)(N,{})]})})})}}},function(e){e.O(0,[665,971,864,744],function(){return e(e.s=4221)}),_N_E=e.O()}]);